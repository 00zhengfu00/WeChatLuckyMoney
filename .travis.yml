language: android
sudo: false
jdk: oraclejdk8
env:
  matrix:
  - ANDROID_TARGET=android-26  ANDROID_ABI=armeabi-v7a armeabi
android:
  components:
  - platform-tools
  - tools
  - build-tools-26.0.2
  - android-N
  - extra
licenses:
  - android-sdk-license-.+
  - '.+'
before_install:
- openssl aes-256-cbc -K $encrypted_6b42a8524af0_key -iv $encrypted_6b42a8524af0_iv
 -in monkeytong.jks.enc -out monkeytong.jks -d
before_script:
- mkdir "$ANDROID_HOME/licenses" || true
- gem install fir-cli
script:
- ./gradlew assembleRelease
after_script:
- fir p app/build/outputs/apk/app-release.apk -T $FIR_TOKEN -c "`git cat-file tag $TRAVIS_TAG`"
notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/d83cc8365de0abdd097e
    on_success: always  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: always     # options: [always|never|change] default: always
